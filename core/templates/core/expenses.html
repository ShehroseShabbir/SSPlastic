{% load static %}
<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Expenses</title>
  <style>
    body{font-family:Segoe UI,Arial,sans-serif;background:#f4f6f9;margin:0;padding:20px}
    .wrap{max-width:1100px;margin:0 auto}
    h1{margin:0 0 12px}
    table{width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden}
    th,td{padding:10px 12px;border-bottom:1px solid #eee;text-align:left}
    th{background:#0366d6;color:#fff}
    .cards{display:flex;gap:12px;flex-wrap:wrap;margin:16px 0}
    .card{flex:1 1 220px;background:#fff;border:1px solid #eaeaea;border-radius:8px;padding:12px}
    .title{font-weight:600;margin-bottom:6px}
  </style>
</head>
<body>
<div class="wrap">
  <h1>Expenses</h1>

  <div class="cards">
    {% for row in month_expenses %}
      <div class="card">
        <div class="title">{{ row.category__name }}</div>
        <div>Current Month Total: <b>{{ row.total }}</b></div>
      </div>
    {% empty %}
      <div>No expenses recorded this month.</div>
    {% endfor %}
  </div>

  <table>
    <tr>
      <th>Date</th><th>Title</th><th>Category</th><th>Amount</th><th>Period</th><th>Attachment</th>
    </tr>
    {% for e in expenses %}
    <tr>
      <td>{{ e.expense_date }}</td>
      <td>{{ e.title }}</td>
      <td>{{ e.category.name }}</td>
      <td>{{ e.amount }}</td>
      <td>{{ e.get_period_display }}</td>
      <td>
        {% if e.attachment %}
          <a href="{{ e.attachment.url }}" target="_blank">View</a>
        {% else %}
          â€”
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </table>
</div>
</body>
</html>
